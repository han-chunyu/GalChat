# GalChat ğŸ®ğŸ’¬

<div align="center">

[![License: GPL-3.0](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
![Python Version](https://img.shields.io/badge/Python-3.10.14%2B-blue)
![PyTorch Version](https://img.shields.io/badge/PyTorch-2.5.1%2B-red)
![SWIFT Version](https://img.shields.io/badge/SWIFT-3.0.3%2B-orange)
![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20Linux%20%7C%20macOS-lightgrey)
[![PRs Welcome](https://img.shields.io/badge/PRs-Welcome-brightgreen)](CONTRIBUTING.md)
[![Contributors](https://img.shields.io/github/contributors/anka-afk/GalChat?color=green)](https://github.com/anka-afk/GalChat/graphs/contributors)
[![Last Commit](https://img.shields.io/github/last-commit/anka-afk/GalChat)](https://github.com/anka-afk/GalChat/commits/main)

</div>

<div align="center">

[![Moe Counter](https://count.getloli.com/get/@GalChat?theme=moebooru)](https://github.com/anka-afk/GalChat)

</div>

## ç›®å½•

- [ç®€ä»‹](#ç®€ä»‹-)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§-)
- [è·¯çº¿å›¾](#è·¯çº¿å›¾-)
- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚-)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹-)
  - [å…‹éš†é¡¹ç›®](#1-å…‹éš†é¡¹ç›®)
  - [é…ç½®ç¯å¢ƒ](#2-é…ç½®ç¯å¢ƒ)
  - [å‡†å¤‡æ•°æ®](#3-å‡†å¤‡æ•°æ®å¯é€‰)
  - [å¾®è°ƒæ¨¡å‹](#4-å¾®è°ƒæ¨¡å‹)
- [è¿›é˜¶æŒ‡å—](#è¿›é˜¶æŒ‡å—-)
  - [è‡ªå®šä¹‰æ•°æ®é›†](#è‡ªå®šä¹‰æ•°æ®é›†)
  - [å¾®è°ƒå‚æ•°è°ƒä¼˜](#å¾®è°ƒå‚æ•°è°ƒä¼˜)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—-)
- [è‡´è°¢](#è‡´è°¢-)
- [è®¸å¯è¯](#è®¸å¯è¯-)

## ç®€ä»‹ ğŸŒŸ

GalChat æ˜¯ä¸€ä¸ªåŸºäºå¤§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„è§’è‰²æ‰®æ¼”å¯¹è¯ç³»ç»Ÿï¼Œä¸“ä¸º Galgame çˆ±å¥½è€…è®¾è®¡ã€‚é€šè¿‡ç²¾ç»†å¤„ç†çš„å¤šè½®å¯¹è¯æ•°æ®é›†ï¼Œæˆ‘ä»¬æä¾›ä»æ•°æ®æ¸…æ´—ã€æ¨¡å‹å¾®è°ƒåˆ°äº¤äº’å¼éƒ¨ç½²çš„å…¨æµç¨‹è§£å†³æ–¹æ¡ˆã€‚é¡¹ç›®åŸºäº Modelscope çš„ [SWIFT](https://github.com/modelscope/swift) æ¡†æ¶æ„å»ºï¼Œæ”¯æŒé«˜æ•ˆå‚æ•°å¾®è°ƒå’Œåˆ†å¸ƒå¼è®­ç»ƒã€‚

## æ ¸å¿ƒç‰¹æ€§ ğŸ§©

- ğŸ§© æ”¯æŒ LLaMAã€ChatGLMã€Deepseek ç­‰ä¸»æµå¤§æ¨¡å‹
- ğŸ“Š åŒ…å«è‡ªåŠ¨åŒ–æ•°æ®æ¸…æ´—æµæ°´çº¿
- âš¡ åŸºäº QLoRA çš„é«˜æ•ˆå¾®è°ƒæŠ€æœ¯
- ğŸ­ å¤šè§’è‰²æƒ…æ„Ÿä¸€è‡´æ€§æ§åˆ¶
- ğŸš€ å¼€ç®±å³ç”¨çš„ Gradio äº¤äº’ç•Œé¢

## è·¯çº¿å›¾ ğŸ—ºï¸

- [x] æ•°æ®é¢„å¤„ç†å·¥å…·ï¼ˆv0.1ï¼‰
- [x] åŸºç¡€å¾®è°ƒæ¡†æ¶é›†æˆï¼ˆv0.2ï¼‰
- [ ] äº¤äº’å¼æ¼”ç¤ºé¡µé¢ï¼ˆv0.3ï¼‰
- [ ] å¤šæ¨¡æ€æ‰©å±•ï¼ˆv1.0 Roadmapï¼‰

## ç¯å¢ƒè¦æ±‚ âš™ï¸

- Python 3.10.14
- CUDA 11.7+ (æ¨è NVIDIA GPU æ˜¾å­˜ â‰¥ 16GB)
- PyTorch 2.0+

## å¿«é€Ÿå¼€å§‹ ğŸš€

### 1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/anka-afk/GalChat
cd GalChat
```

### 2. **é…ç½®ç¯å¢ƒ**

```
# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python -m venv galchat-env
source galchat-env/bin/activate  # Linux/macOS
galchat-env\Scripts\activate.bat  # Windows

# å®‰è£…æ ¸å¿ƒä¾èµ–
pip install -r requirements.txt
```

å®‰è£… SWIFT æ¡†æ¶:

- Windowsï¼š
  è¿è¡Œ `install_swift.bat` è„šæœ¬ä»¥å®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚

- Linux/macOSï¼š

```bash
chmod +x install_swift.sh && ./install_swift.sh
```

### 3. **å‡†å¤‡æ•°æ®(å¯é€‰)(çº¦ 2GB)**

åœ¨ `data_prep` ç›®å½•ä¸‹ï¼Œè¿è¡Œ `download_dataset.py` è„šæœ¬ä»¥ä¸‹è½½æ‰€éœ€çš„æ•°æ®é›†ã€‚

```bash
python data_prep/download_dataset.py
```

### 4. å¾®è°ƒæ¨¡å‹

åœ¨å®Œæˆæ•°æ®é¢„å¤„ç†åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¾®è°ƒå·¥å…·å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚è¯·æ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´è®­ç»ƒå‚æ•°ã€‚

åœ¨ `finetune` ç›®å½•ä¸‹ï¼Œè¿è¡Œ `finetune.py` è„šæœ¬è¿›è¡Œå¾®è°ƒã€‚

```
python finetune/finetune.py
```

### å¯åŠ¨äº¤äº’ç•Œé¢

æ ‡è®°ä¸ºæœªå®Œæˆ

## è¿›é˜¶æŒ‡å— ğŸ“š

### è‡ªå®šä¹‰æ•°æ®é›†

1. å°†åŸå§‹æ–‡æœ¬æ”¾å…¥ `raw_data/` ç›®å½•
2. ç¡®ä¿æ•°æ®æ ¼å¼ä¸ºï¼š

```json
{
  "conversation": [
    { "role": "user", "content": "ä½ å¥½..." },
    { "role": "character", "content": "æ™šä¸Šå¥½..." }
  ]
}
```

3. è¿è¡Œé¢„å¤„ç†è„šæœ¬ç”Ÿæˆè®­ç»ƒæ•°æ®

### å¾®è°ƒå‚æ•°è°ƒä¼˜

å‚è€ƒ `configs/tuning/` ä¸‹çš„ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒä»¥ä¸‹è®­ç»ƒç­–ç•¥ï¼š

- å…¨å‚æ•°å¾®è°ƒ
- LoRA/QLoRA
- P-Tuning v2
- å¤šä»»åŠ¡å­¦ä¹ 

## è´¡çŒ®æŒ‡å— ğŸ¤

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼è¯·é˜…è¯» [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£ï¼š

- é—®é¢˜æŠ¥å‘Šè§„èŒƒ
- Pull Request æµç¨‹
- ä»£ç é£æ ¼è¦æ±‚
- ç¤¾åŒºè¡Œä¸ºå‡†åˆ™

## è‡´è°¢ ğŸ™

- [ModelScope](https://modelscope.cn/) æä¾›çš„åŸºç¡€è®¾æ–½æ”¯æŒ
- [SWIFT](https://github.com/modelscope/swift) é«˜æ•ˆå¾®è°ƒæ¡†æ¶
- æ‰€æœ‰æ•°æ®é›†è´¡çŒ®è€…

## è®¸å¯è¯ ğŸ“œ

æœ¬é¡¹ç›®é‡‡ç”¨ GPL-3.0 è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](https://github.com/anka-afk/GalChat/blob/main/LICENSE) æ–‡ä»¶ã€‚
